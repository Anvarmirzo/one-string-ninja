(()=>{"use strict";var e=[,(e,t,a)=>{a.r(t),a.d(t,{inputMask:()=>n});var n=function(e,t,a){var n,r,i,s=e,c=/^\d{0,16}$/g,l=t,d=/^\d{0,4}$/g,o=function(e,t,a){for(var n=[],r=0;r<e.length;r++)0!==r&&r%t==0&&n.push(a),n.push(e[r]);return n.join("")},u=function(e){return e.replace(/[^\d]/g,"")},v=function(e,t){return Math.floor(e/(t+1))},m=function(e){var t="",a={amex:/^3/,visa:/^4/,mastercard:/^5/,disc:/^6/,genric:/(^1|^2|^7|^8|^9|^0)/};for(var n in a)if(a[n].test(e)){t=n;break}var r=document.querySelector(".cc-types__img--active"),i=document.querySelector(".cc-types__img--".concat(t));r&&r.classList.remove("cc-types__img--active"),i&&i.classList.add("cc-types__img--active")};s.addEventListener("keydown",(function(e){var t=e.target;n=t.value,r=t.selectionEnd})),s.addEventListener("input",(function(e){var t,a=e.target,i=u(a.value);i.match(c)?(i=o(i,4," "),t=r-v(r,4)+v(r+(i.length-n.length),4)+(u(i).length-u(n).length),a.value=""!==i?i:""):(a.value=n,t=r),a.setSelectionRange(t,t),m(a.value)})),l.addEventListener("keydown",(function(e){var t=e.target;i=t.value,t.selectionEnd})),l.addEventListener("input",(function(e){var t=e.target,a=t.value;(a=u(a)).match(d)?(a=o(a,2,"/"),t.value=a):t.value=i}))}}],t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{a.r(n);var e=a(1);function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],s=!0,c=!1;try{for(a=a.call(e);!(s=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(c)throw r}}return i}(e,t)||i(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=i(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return c=e.done,e},e:function(e){l=!0,s=e},f:function(){try{c||null==a.return||a.return()}finally{if(l)throw s}}}}function i(e,t){if(e){if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}document.addEventListener("DOMContentLoaded",(function(){var a,n=0,i=0,s={name:"",email:"",year:"",hasGuitar:"",during:"",terms:{}};a=document.querySelectorAll("[data-page]"),document.getElementById("pages-count").textContent=+a.length-1>12?"12":a.length-1,i=+a.length-1>12?"12":a.length-1;var c,l,d,o,u,v,m,y,g,f,p,b=document.getElementById("hold-current-page");new MutationObserver((function(e){e.forEach((function(e){if("attributes"===e.type){if(8!==n){var t=document.querySelector('[data-page="'.concat(n-1,'"]')),a=document.querySelector('[data-page="'.concat(n,'"]'));t.classList.remove("active"),a.classList.add("active")}var r=document.getElementById("progress"),s=document.getElementById("progress-bar-line");document.getElementById("display-current-page").textContent=n,n&&r.classList.add("active"),s.style.width="".concat(n/i*100,"%")}}))})).observe(b,{attributes:!0}),document.addEventListener("click",(function(e){e.target.closest("[data-next-btn]")&&"true"!==e.target.dataset.disabled&&(n++,b.value=n)})),c=0,l=document.getElementById("welcome-slider__controls"),d=document.getElementById("welcome-slider__images").children,o=document.getElementById("welcome-slider__text").children,l.addEventListener("click",(function(e){var t=e.target.closest("button");if(t&&l.contains(t)){var a=l.querySelectorAll("[data-control]");if(a[c].classList.remove("active"),d[c].classList.remove("active"),o[c].classList.remove("active"),t.hasAttribute("data-control"))c=+t.getAttribute("data-control");else if("next-btn"===t.id)if(c<2)1===c&&(t.textContent="Начать!"),c++;else{var r=document.querySelector('[data-page="0"]'),i=document.querySelector('[data-page="1"]');r.classList.remove("active"),i.classList.add("active"),n++,b.value=n}switch(a[c].classList.add("active"),d[c].classList.add("active"),o[c].classList.add("active"),c){case 0:break;case 1:a[0].style.left="17px",a[1].style.left="58px",a[2].style.left="0";break;case 2:a[0].style.left="32px",a[1].style.left="16px"}}})),function(){var e=0,t=document.getElementById("subscribe-slider__controls"),a=document.getElementById("subscribe-slider__text").children;t.addEventListener("click",(function(r){var i=r.target.closest("button");if(i&&t.contains(i)){var s=t.querySelectorAll("[data-subscribe-control]");if(s[e].classList.remove("active"),a[e].classList.remove("active"),i.hasAttribute("data-subscribe-control"))e=+i.getAttribute("data-subscribe-control");else if("subscribe-btn"===i.id)if(e<3)e++;else{var c=document.querySelector('[data-page="13"]'),l=document.querySelector('[data-page="14"]');c.classList.remove("active"),l.classList.add("active"),n++,b.value=n}switch(s[e].classList.add("active"),a[e].classList.add("active"),e){case 0:break;case 1:s[0].style.left="16px",s[1].style.left="0";break;case 2:s[0].style.left="32px",s[2].style.left="16px";break;case 3:s[0].style.left="48px",s[3].style.left="32px"}}}))}(),(u=document.getElementById("name-form")).addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("username");s.name=u.querySelector("input").value,t.textContent=s.name})),(v=document.getElementById("email-form")).addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("username");s.email=v.querySelector("input").value,t.textContent=s.name})),document.getElementById("year-btns").addEventListener("click",(function(e){e.preventDefault(),e.target.closest("button")&&(e.target.dataset.year?s.year=e.target.dataset.year:(s.year=e.target.parentElement.dataset.year,s.year||(s.year=e.target.parentElement.parentElement.dataset.year)))})),document.getElementById("has-guitar-btns").addEventListener("click",(function(e){e.target.closest("[data-next-btn]")&&(e.target.dataset.hasguitar?s.hasGuitar=e.target.dataset.hasguitar:(s.hasGuitar=e.target.parentElement.dataset.hasguitar,s.hasGuitar||(s.hasGuitar=e.target.parentElement.parentElement.dataset.hasguitar)))})),document.getElementById("during-btns").addEventListener("click",(function(e){e.target.closest("[data-next-btn]")&&(e.target.dataset.during?s.during=e.target.dataset.during:(s.during=e.target.parentElement.dataset.during,s.during||(s.during=e.target.parentElement.parentElement.dataset.during)))})),(m=document.getElementById("terms-form")).addEventListener("submit",(function(e){e.preventDefault();var t,a=r(m.querySelectorAll("[type=checkbox]"));try{for(a.s();!(t=a.n()).done;){var n=t.value;s.terms[n.value]=!!n.checked}}catch(e){a.e(e)}finally{a.f()}})),y=document.getElementById("checkboxes"),g=y.querySelectorAll("#during-btns span"),f=y.querySelectorAll(".title"),(p=document.getElementById("change-checkboxes")).addEventListener("click",(function(){if(g.length&&!(f.length<2)){y.classList.add("second-part"),f[0].classList.remove("active"),f[1].classList.add("active"),g[0].textContent="Сыграть крутую песню в любое время",g[1].textContent="Очаровать девушку",g[1].parentElement.classList.add("swapped"),g[2].innerHTML="Играть&nbsp;вместе с другими",g[2].parentElement.classList.add("swapped"),g[3].textContent="Поднимать себе настроение",g[4].innerHTML="Сочинять свою&nbsp;музыку",g[5].parentElement.classList.add("create"),g[6].innerHTML="Медитировать<br> и снимать стресс";var e,t=r(g);try{for(t.s();!(e=t.n()).done;)e.value.previousElementSibling.checked=!1}catch(e){t.e(e)}finally{t.f()}setTimeout((function(){7===n&&(n++,p.setAttribute("data-next-btn","8"),y.setAttribute("data-page","8"),b.value=n)}),1)}})),document.getElementById("close-progress-btn").addEventListener("click",(function(){var e=document.getElementById("progress");e.style.opacity="0",e.style.height="0",e.style.position="absolute",e.style.overflow="hidden"}));var h,E,L,x,I,S,k=function(e,t){var a=document.getElementById(e),n=document.getElementById(t);a.addEventListener("input",(function(e){e.target.value.trim().length>1?n.dataset.disabled="false":n.dataset.disabled="true"}))};k("name-form-input","name-form-btn"),k("email-form-input","email-form-btn"),h={cardType:"",cardNumber:"",cardExpiry:"",cardCvc:"",cardName:"",validFields:[]},E=/^5[1-5][0-9]{14}$|^2(?:2(?:2[1-9]|[3-9][0-9])|[3-6][0-9][0-9]|7(?:[01][0-9]|20))[0-9]{12}$/,L=/^4[0-9]{12}(?:[0-9]{3})?$/,x=/^(5018|5081|5044|5020|5038|603845|6304|6759|676[1-3]|6799|6220|504834|504817|504645)[0-9]{8,15}$/,I=/^(0[1-9]|1[0-2])\/?([0-9]{4}|[0-9]{2})$/gm,S=/^[0-9]{3,4}$/,function(){var e,t=r(document.getElementById("payment-radios").querySelectorAll('input[type="radio"]'));try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("input",(function(e){h.cardType=e.target.value}))}catch(e){t.e(e)}finally{t.f()}}(),function(){var a=document.getElementById("payment-fields").querySelectorAll('input[type="text"]'),i=document.getElementById("payment-submit-btn"),s=document.getElementById("error-msg"),c=t(a,4),l=c[0],d=c[1],o=c[2],u=c[3];(0,e.inputMask)(l,d,o);var v,m=r(a);try{var y=function(){var e=v.value;e.addEventListener("input",(function(t){switch(Object.keys(e.dataset)[0]){case"number":h.cardNumber=t.target.value.split(" ").join("");break;case"expiry":h.cardExpiry=t.target.value;break;case"cvc":h.cardCvc=t.target.value;break;case"name":h.cardName=t.target.value}}))};for(m.s();!(v=m.n()).done;)y()}catch(e){m.e(e)}finally{m.f()}i.addEventListener("click",(function(){h.cardNumber.match(E)||h.cardNumber.match(L)||h.cardNumber.match(x)?(l.classList.contains("invalid")&&l.classList.remove("invalid"),h.validFields.includes("cardNumber")||h.validFields.push("cardNumber")):(s.classList.add("active"),l.classList.add("invalid")),h.cardExpiry.match(I)?(h.validFields.includes("cardExpiry")||h.validFields.push("cardExpiry"),d.classList.contains("invalid")&&d.classList.remove("invalid")):(s.classList.add("active"),d.classList.add("invalid")),h.cardCvc.match(S)?(h.validFields.includes("cardCvc")||h.validFields.push("cardCvc"),o.classList.contains("invalid")&&o.classList.remove("invalid")):(s.classList.add("active"),o.classList.add("invalid")),h.cardName.length>2?(h.validFields.includes("cardName")||h.validFields.push("cardName"),u.classList.contains("invalid")&&u.classList.remove("invalid")):(s.classList.add("active"),u.classList.add("invalid")),4===h.validFields.length&&s.classList.contains("active")&&(s.classList.remove("active"),n++,b.value=n)}))}()}))})()})();